<div class="IndexPage">
  <section class="problematique" style="background-image: linear-gradient(to bottom, #f7f7f7, #e7e7e7);">
    <div class="problematique-container">
      <h2>Recherche dans les données</h2>
    </div>
  </section>

  <div id="search" class="search-container">
    <div class="search-form">
      <div class="form-group table-selection">
        <select 
          id="table-select" 
          [(ngModel)]="selectedTable" 
          (change)="onTableChange($event)">
          <option value="">Sélectionnez une table...</option>
          <option *ngFor="let table of availableTables" [value]="table">{{table}}</option>
        </select>
      </div>

      <div *ngIf="error" class="error-message">
        {{ error }}
      </div>

      <div class="search-lines">
        <app-search-line
          [searchLineId]="searchLines[0].id"
          [column]="searchLines[0].column"
          [operator]="searchLines[0].operator"
          [value]="searchLines[0].value"
          [selectedTable]="selectedTable"
          [columns]="availableColumns"
          [isFirst]="true"
          [isLast]="true"
          (onUpdate)="updateSearchLine(0, $event)">
        </app-search-line>
      </div>

      <div class="search-actions">
        <button 
          (click)="request()" 
          [disabled]="loading"
          class="submit-button search-button">
          {{ loading ? 'Recherche en cours...' : 'Rechercher' }}
        </button>
      </div>
    </div>

    <div class="results-section">
      <h3>Résultats</h3>
      <div *ngIf="searchResults.length === 0" class="no-results">
        Aucun résultat trouvé.
      </div>
      <div *ngIf="searchResults.length > 0">
        <app-resultats-page-recherche [results]="searchResults"></app-resultats-page-recherche>
      </div>
    </div>
  </div>

  <div class="horizontal-bar"></div>
</div>
