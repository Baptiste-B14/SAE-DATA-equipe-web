<!-- recherche-page.component.html -->
<div class="container" id="page-recherche">
    <div class="howto">
      <p>
        Afin de garantir une transparance sur nos données, nous avons faconné un moteur de recherche relié à notre base de donnée.<br><br>
        Pour l'utiliser : il vous faut dans un premier temps spécifier la table et la colonne dans lesquelles vous désirez ressortir des données. Ensuite, vous devez spécifier le filtre à appliquer et la valeure recherchée.
        
      </p>
      <button (click)="showImage()" class="mcdShow">Découvrir le modèle conceptuel de données</button>
  </div>

  <!-- Modal pour l'image -->
  <div class="modal" *ngIf="isImageVisible">
    <div class="modal-content">
      <button class="close-button" (click)="hideImage()">×</button>
      <img src="../../assets/images/mcd.PNG" alt="Image affichée">
    </div>
  </div>

    <div id="search" #searchContainer>
      <!-- Table Selection -->
      <div class="table-selection">
        <select 
          id="table-select" 
          [value]="selectedTable" 
          (change)="onTableChange($event)">
          @if (!selectedTable) {
            <option value="">Sélectionnez une table</option>
          }
          @for (table of availableTables; track table) {
            <option [value]="table">{{table}}</option>
          }
        </select>
      </div>
      <!-- Search Lines -->
      @for (line of searchLines; track line.id) {
        <app-search-line
          [searchLineId]="line.id"
          [column]="line.column"
          [operator]="line.operator"
          [value]="line.value"
          [selectedTable]="selectedTable"
          [isFirst]="$index === 0"
          [isLast]="$index === searchLines.length - 1"
          (onAdd)="addSearchLine()"
          (onRemove)="removeSearchLine($index)"
          (onUpdate)="updateSearchLine($index, $event)">
        </app-search-line>
      }
  
      <!-- Submit Button -->
      <button 
        (click)="request()" 
        [disabled]="loading"
        class="submit-button">
        {{ loading ? 'Recherche en cours...' : 'Recherche' }}
      </button>
    </div>
  
    <!-- Results Section -->
     
    <div class="horizontal-bar"></div>
    <h3>Résultats</h3>
    <div id="results">
      <app-resultats-page-recherche [results]="searchResults"></app-resultats-page-recherche>
    </div>
  </div>
<!--<div class="container" id="page-recherche">
    <div id="search" #searchContainer>
            @for(line of staticSearchlines; track $index){
                <app-search-line [searchLineId]=$index></app-search-line>
            }
            <input (click)="request()" type="submit" value="submit">
    </div>
    <div class="horizontal-bar"></div>
    <div id="results">
        <h3>Résultats</h3>
        <app-resultats-page-recherche></app-resultats-page-recherche>
    </div>
</div>-->


